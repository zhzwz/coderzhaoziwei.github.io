<!DOCTYPE html>
<html lang="zh-CN" class="min-h-screen bg-image bg-cover bg-center bg-fixed"> <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Commit Message 规范 | Coder Zhao’s Zone</title> <meta name="generator" content="Jekyll v4.2.1"> <meta property="og:title" content="Commit Message 规范"> <meta name="author" content="Coder Zhao"> <meta property="og:locale" content="zh_CN"> <meta name="description" content="理论上来说，Commit Message 只要能够清楚地说明本次提交的目的即可，那我们为什么还要统一 Commit Message 的规范呢？"> <meta property="og:description" content="理论上来说，Commit Message 只要能够清楚地说明本次提交的目的即可，那我们为什么还要统一 Commit Message 的规范呢？"> <link rel="canonical" href="https://coderzhaoziwei.github.io/posts/commit-message"> <meta property="og:url" content="https://coderzhaoziwei.github.io/posts/commit-message"> <meta property="og:site_name" content="Coder Zhao’s Zone"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2021-06-12T00:00:00+00:00"> <meta name="twitter:card" content="summary"> <meta property="twitter:title" content="Commit Message 规范"> <script type="application/ld+json"> {"headline":"Commit Message 规范","dateModified":"2021-06-12T00:00:00+00:00","datePublished":"2021-06-12T00:00:00+00:00","description":"理论上来说，Commit Message 只要能够清楚地说明本次提交的目的即可，那我们为什么还要统一 Commit Message 的规范呢？","mainEntityOfPage":{"@type":"WebPage","@id":"https://coderzhaoziwei.github.io/posts/commit-message"},"url":"https://coderzhaoziwei.github.io/posts/commit-message","@type":"BlogPosting","author":{"@type":"Person","name":"Coder Zhao"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <!-- Begin Jekyll Feed --> <link type="application/atom+xml" rel="alternate" href="https://coderzhaoziwei.github.io/feed.xml" title="Coder Zhao’s Zone"> <!-- End Jekyll Feed --> <!-- Tailwind --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2/dist/tailwind.min.css"> <!-- Primer Markdown --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/primer-markdown@4.0.0/build/build.css"> <!-- HighlightJS --> <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.0.1/build/highlight.min.js"></script> <script>hljs.highlightAll();</script> <!-- HighlightJS Theme VS2015 --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.0.1/styles/vs2015.css"> <!-- MathJax @see https://www.mathjax.org --> <!-- Theme --> <link rel="stylesheet" href="/assets/css/style.css"> <style id="ThemeColor"> :root { --theme-50: var(--red-50); --theme-100: var(--red-100); --theme-200: var(--red-200); --theme-300: var(--red-300); --theme-400: var(--red-400); --theme-500: var(--red-500); --theme-600: var(--red-600); --theme-700: var(--red-700); --theme-800: var(--red-800); --theme-900: var(--red-900); } </style> <style id="ThemeBackgroundImage">.bg-image { background-image: url("https://cdn.jsdelivr.net/gh/coderzhaoziwei/jekyll-theme-acg/assets/images/pixiv86925095.png"); }</style> <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg"> </head> <body class="flex flex-col items-center bg-black bg-opacity-50"> <header class="w-full fixed z-50 select-none bg-red-600 bg-opacity-10 bg-blur"> <nav class="p-4 font-serif text-xl text-red-50 flex justify-between"> <a class="hover:text-red-400 text-2xl" href="/">Coder Zhao’s Zone</a> <div class="hidden md:block space-x-4"> <a class="hover:text-red-400" href="/categories">分类</a> <a class="hover:text-red-400" href="/tags">标签</a> <a class="hover:text-red-400" href="/about">关于</a> </div> <style>#theme-menu:hover > #theme-menu-dropdown { display: block; }</style> <div id="theme-menu" class="md:hidden"> <button class="hover:outline-none hover:text-red-400"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg> </button> <div class="hidden origin-top-right absolute right-1 rounded-md py-1 bg-red-100 bg-opacity-50 focus:block focus:outline-none" id="theme-menu-dropdown"> <a class="block px-4 py-2 text-sm text-red-600 hover:bg-red-200" href="/categories">分类</a> <a class="block px-4 py-2 text-sm text-red-600 hover:bg-red-200" href="/tags">标签</a> <a class="block px-4 py-2 text-sm text-red-600 hover:bg-red-200" href="/about">关于</a> </div> </div> </nav> </header> <div class="w-acg min-h-screen py-16"> <div class="w-full flex flex-col justify-center items-center content-center text-red-50 py-32"> <!-- title --> <div class="text-center text-4xl font-serif py-8"> Commit Message 规范 </div> <!-- description --> <div class="text-center text-base font-sans py-8">理论上来说，Commit Message 只要能够清楚地说明本次提交的目的即可，那我们为什么还要统一 Commit Message 的规范呢？</div> <!-- categories.html & tags.html --> <div class="flex flex-wrap justify-center items-center content-center select-none"> </div> </div> <!-- article --> <div class="flex flex-wrap"> <div class="flex-grow"> <a class="mx-px text-opacity-75 flex items-center select-none text-sm text-red-500"> <!-- svg --> <svg class=" w-4 h-4 " xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"> </path></svg> <!-- text --> <span class="inline-block p-1 whitespace-nowrap">2021-06-12</span> <!-- count --> </a> </div> <div class="flex flex-wrap"> <a class="mx-px text-opacity-75 flex items-center select-none text-sm text-red-500" href="/tags/git"> <!-- svg --> <svg class=" w-4 h-4 " xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"> </path></svg> <!-- text --> <span class="inline-block p-1 whitespace-nowrap">git</span> <!-- count --> </a> </div> </div> <article class="w-full my-4 mx-auto p-4 rounded-lg text-black bg-red-50 bg-opacity-75 markdown-body"> <h1>Commit Message 规范</h1> <ul id="toc" class="toc">
<li class="toc-li-2"><a class="toc-a" href="#%E5%BC%95%E5%AD%90">引子</a></li>
<li class="toc-li-2"><a class="toc-a" href="#%E4%BD%9C%E7%94%A8">作用</a></li>
<li class="toc-li-2">
<a class="toc-a" href="#%E6%A0%BC%E5%BC%8F">格式</a><ul class="toc-sub-2">
<li class="toc-li-3"><a class="toc-a" href="#type">type</a></li>
<li class="toc-li-3"><a class="toc-a" href="#scope">scope</a></li>
<li class="toc-li-3"><a class="toc-a" href="#subject">subject</a></li>
<li class="toc-li-3"><a class="toc-a" href="#body">body</a></li>
<li class="toc-li-3"><a class="toc-a" href="#footer">footer</a></li>
</ul>
</li>
<li class="toc-li-2"><a class="toc-a" href="#revert">Revert</a></li>
<li class="toc-li-2"><a class="toc-a" href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul> <h2 id="引子">引子</h2> <p>Git 每次提交代码，都必须写提交说明。</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit <span class="nt">-m</span> <span class="s2">"Commit Message"</span>
</code></pre></div></div> <p>目前，社区有多种 Commit Message 的写法规范。本文采用目前使用较广的 AngularJS 的提交说明公约。</p> <ul> <li><a href="https://github.com/angular/angular.js">AngularJS</a></li> <li><a href="https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y">AngularJS Git Commit Message Conventions</a></li> </ul> <h2 id="作用">作用</h2> <p>理论上来说，Commit Message 只要能够清楚地说明本次提交的目的即可，那我们为什么还要统一 Commit Message 的规范呢？</p> <ul> <li>可以使用脚本工具生成 <code class="language-plaintext highlighter-rouge">CHANGELOG.md</code> 变动日志。</li> <li>可以过滤一些不重要的提交记录，便于快速查找信息。</li> </ul> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 启动查错时</span>
git bisect start <span class="o">[</span>FROM] <span class="o">[</span>TO]
<span class="c"># 显示日志时 仅显示本次发布新增加的功能</span>
git log <span class="o">[</span>RELEASE] HEAD <span class="nt">--grep</span> feature
</code></pre></div></div> <ul> <li>可以在浏览历史记录时，展示更直观易读的信息。</li> </ul> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 仅显示指定 tag 的提交记录</span>
git log <span class="o">[</span>TAG] HEAD <span class="nt">--pretty</span><span class="o">=</span>format:%s
</code></pre></div></div> <h2 id="格式">格式</h2> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
&lt;空行&gt;
&lt;body&gt;
&lt;空行&gt;
&lt;footer&gt;
</code></pre></div></div> <p>提交说明包含 <code class="language-plaintext highlighter-rouge">header</code>，<code class="language-plaintext highlighter-rouge">body</code>，<code class="language-plaintext highlighter-rouge">footer</code> 三个部分，其中只有 <code class="language-plaintext highlighter-rouge">header</code> 部分是必须的，<code class="language-plaintext highlighter-rouge">body</code> 和 <code class="language-plaintext highlighter-rouge">footer</code> 是可选的。</p> <p>为了在 github 或 git 工具中更容易地阅读 commit message ，任何一行 message 都不能超过 100 个字符。</p> <h3 id="type">type</h3> <ul> <li> <p>type 只允许使用下面 7 个标识。</p> <table> <thead> <tr> <th style="text-align: left">Type</th> <th style="text-align: left"> </th> </tr> </thead> <tbody> <tr> <td style="text-align: left">feat</td> <td style="text-align: left">功能（增加新的特性）</td> </tr> <tr> <td style="text-align: left">fix</td> <td style="text-align: left">修复（修复 Bug）</td> </tr> <tr> <td style="text-align: left">docs</td> <td style="text-align: left">文档</td> </tr> <tr> <td style="text-align: left">style</td> <td style="text-align: left">格式（不影响代码运行的变动）</td> </tr> <tr> <td style="text-align: left">refactor</td> <td style="text-align: left">重构</td> </tr> <tr> <td style="text-align: left">test</td> <td style="text-align: left">测试</td> </tr> <tr> <td style="text-align: left">chore</td> <td style="text-align: left">构建（构建过程、辅助工具等）</td> </tr> </tbody> </table> </li> <li> <p>如果提交说明的 type 是 <code class="language-plaintext highlighter-rouge">feat</code> 或 <code class="language-plaintext highlighter-rouge">fix</code>，那么该提交将出现在 CHANGLOG 中。</p> </li> </ul> <h3 id="scope">scope</h3> <ul> <li>scope 用于指定提交更改的位置。</li> </ul> <h3 id="subject">subject</h3> <p>subject 描述要求简短，首字母小写，使用第一人称现在时的动词开头，结尾不加 <code class="language-plaintext highlighter-rouge">.</code>。</p> <table> <thead> <tr> <th style="text-align: left">动词 (Verb)</th> <th style="text-align: left">CN</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">optimize</td> <td style="text-align: left">优化</td> </tr> </tbody> </table> <h3 id="body">body</h3> <p>Body 部分是对 commit 的详细描述，通常说明代码变动的动机，以及与以前代码的对比，允许多行内容。</p> <h3 id="footer">footer</h3> <ul> <li>如果当前代码与上一个版本不兼容，那么 footer 部分使用 <code class="language-plaintext highlighter-rouge">BREAKING CHANGE:</code> 开头。后面是对变动的描述、以及变动理由和迁移方法。</li> <li>如果当前 commit 针对某个 issue，那么可以在 footer 部分关闭这个 issue。允许一次关闭多个 issue。</li> </ul> <div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Closes #111, #222, #333
</code></pre></div></div> <h2 id="revert">Revert</h2> <p>如果当前 commit 用于撤销以前的 commit，那么必须以 <code class="language-plaintext highlighter-rouge">revert:</code> 开头，后面跟着被撤销 Commit 的 Header。Body 部分的格式是固定的，必须写成 <code class="language-plaintext highlighter-rouge">This reverts commit &lt;hash&gt;.</code>，其中的 <code class="language-plaintext highlighter-rouge">&lt;hash&gt;</code> 是被撤销 commit 的 SHA 标识符。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>revert: feat(pencil): add 'graphiteWidth' option

This reverts commit 667ecc1654a317a13331b17617d973392f415f02.
</code></pre></div></div> <p>如果当前 Commit 与被撤销的 Commit 在同一个 Release 中，那么它们都不会出现在变动日志 CHANGELOG 中。</p> <p>如果两者在不同的 Release 中，那么当前 Commit 会出现在 CHANGELOG 的 Reverts 小标题下。</p> <h2 id="参考">参考</h2> <ul> <li>
<a href="http://www.ruanyifeng.com/">阮一峰</a>的博客文章：<a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html">《Commit message 和 Change log 编写指南》</a>
</li> </ul> </article> <div class="w-full mx-auto flex justify-between space-x-4"> <!-- prev --> <a class="w-1/2 p-4 flex items-center rounded-lg bg-red-50 bg-opacity-75" href="/posts/scss-conflict"> <svg class=" flex-shrink-0 text-red-600 w-6 h-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"> </path></svg> <span class="ml-4 text-black">Scss 与 CSS 语法冲突的解决办法</span> </a> <!-- next --> <a class="w-1/2 p-4 flex flex-row-reverse items-center rounded-lg bg-red-50 bg-opacity-75" href="/posts/install-homebrew"> <svg class=" flex-shrink-0 text-red-600 w-6 h-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"> </path></svg> <span class="mr-4 text-black">Homebrew 安装过程记录</span> </a> </div> <!-- posts --> </div> <footer class="w-full mt-4 p-2 text-sm text-red-100 "> <p class="text-center"> Powered by <a class="text-red-400" href="https://jekyllrb.com" target="_block">Jekyll</a> · <a class="text-red-400" href="https://github.com/coderzhaoziwei/jekyll-theme-acg" target="_block">Jekyll Theme ACG</a> </p> <p class="text-center"> Copyright 2021 <a class="text-red-400">Coder Zhao</a> · All rights reserved. </p> </footer> </body> </html>
